(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{137:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return u}));var r=n(1),i=n(9),a=(n(0),n(177)),o={},s={id:"dynamisation/domains",title:"domains",description:"# Domaines",source:"@site/docs/dynamisation/domains.md",permalink:"/docs/dynamisation/domains",sidebar:"docs",previous:{title:"modules",permalink:"/docs/dynamisation/modules"},next:{title:"dev",permalink:"/docs/dev/dev"}},l=[{value:"Pr\xe9paration de l&#39;h\xe9bergement",id:"pr\xe9paration-de-lh\xe9bergement",children:[]},{value:"Installation des modules n\xe9cessaires",id:"installation-des-modules-n\xe9cessaires",children:[]},{value:"Configurer les domaines",id:"configurer-les-domaines",children:[{value:"Cas particulier de &quot;config split&quot;",id:"cas-particulier-de-config-split",children:[]}]},{value:"Utilisation",id:"utilisation",children:[]}],c={rightToc:l};function u(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h1",{id:"domaines"},"Domaines"),Object(a.b)("p",null,"Il s'agit de g\xe9rer des domaines multiples \xe0 partir du m\xeame backoffice."),Object(a.b)("h2",{id:"pr\xe9paration-de-lh\xe9bergement"},"Pr\xe9paration de l'h\xe9bergement"),Object(a.b)("p",null,"Il faut s'assurer que tous les domaines consid\xe9r\xe9s redirigent vers le m\xeame \"document root\" et pour les espaces de recette et de production qu'ils soient correctement prot\xe9g\xe9s en https. Nota bene : si l'administrateur de contenu du site veut cr\xe9er des sous-sites \xe0 la vol\xe9e, il faut qu'un certificat SSL \"wildcard\" soit g\xe9n\xe9r\xe9, et cela n\xe9cessite l'acc\xe8s au nom de domaine (pour le renouvellement automatique)."),Object(a.b)("h2",{id:"installation-des-modules-n\xe9cessaires"},"Installation des modules n\xe9cessaires"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"\xc0 la racine du projet, taper la commande ",Object(a.b)("inlineCode",{parentName:"li"},'composer require "drupal/domain @beta" "drupal/redirect"')),Object(a.b)("li",{parentName:"ol"},"Activer les modules avec la commande ",Object(a.b)("inlineCode",{parentName:"li"},"vendor/bin/drush en domain domain_access domain_content domain_config domain_config_ui redirect"))),Object(a.b)("h2",{id:"configurer-les-domaines"},"Configurer les domaines"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Dans un navigateur aller \xe0 l'url /admin/config/domain/"),Object(a.b)("li",{parentName:"ol"},"Saisir tous les noms de domaine.")),Object(a.b)("h3",{id:"cas-particulier-de-config-split"},'Cas particulier de "config split"'),Object(a.b)("p",null,"Faites tr\xe8s attention \xe0 ce que les noms syst\xe8mes des enregistrements de domaine (domain records) ne soient pas typ\xe9s pour \xe9viter toute confusion. De plus, cela permet de s\xe9parer uniquement les domain.record.* sur chaque configuration."),Object(a.b)("h2",{id:"utilisation"},"Utilisation"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"Aller sur les contenus qui ne doivent pr\xe9sents que sur le 2\xe8me site, et utiliser le menu d\xe9pliant \xe0 droite pour sp\xe9cifier le site cible"),Object(a.b)("li",{parentName:"ol"},'Pour changer la page d\'acceuil sur les autres sites que le site par d\xe9faut aller sur /admin/config/system/site-information et utiliser le s\xe9lecteur de domaine en haut de page, puis changer la "Default front page"'),Object(a.b)("li",{parentName:"ol"},"Au besoin faire des redirections pour certains noeud via /admin/config/search/redirect/add en sp\xe9cifiant le nom de domaine complet.")))}u.isMDXComponent=!0},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var r=n(0),i=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=i.a.createContext({}),u=function(e){var t=i.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s({},t,{},e)),n},d=function(e){var t=u(e.components);return i.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},m=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,o=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,b=d["".concat(o,".").concat(m)]||d[m]||p[m]||a;return n?i.a.createElement(b,s({ref:t},c,{components:n})):i.a.createElement(b,s({ref:t},c))}));function b(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var c=2;c<a;c++)o[c]=n[c];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);